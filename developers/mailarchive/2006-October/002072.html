<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [Open Office] JRE register fails when building 2.0.4 on Mandriva	2007 x86_64
   </TITLE>
   <LINK REL="Index" HREF="http://lists.ximian.com/pipermail/openoffice/2006-October/index.html" >
   <LINK REL="made" HREF="mailto:openoffice%40lists.ximian.com?Subject=%5BOpen%20Office%5D%20JRE%20register%20fails%20when%20building%202.0.4%20on%20Mandriva%0A%092007%20x86_64&In-Reply-To=">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002071.html">
   <LINK REL="Next"  HREF="002073.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Open Office] JRE register fails when building 2.0.4 on Mandriva	2007 x86_64</H1>
    <B>Atle Nissestad</B> 
    <A HREF="mailto:openoffice%40lists.ximian.com?Subject=%5BOpen%20Office%5D%20JRE%20register%20fails%20when%20building%202.0.4%20on%20Mandriva%0A%092007%20x86_64&In-Reply-To="
       TITLE="[Open Office] JRE register fails when building 2.0.4 on Mandriva	2007 x86_64">atle.nissestad at norbit.no
       </A><BR>
    <I>Thu Oct 19 07:13:27 EDT 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002071.html">[Open Office] jni.h could not be found
</A></li>
        <LI>Next message: <A HREF="002073.html">[Open Office] JRE register fails when building 2.0.4 on	Mandriva 2007 x86_64
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2072">[ date ]</a>
              <a href="thread.html#2072">[ thread ]</a>
              <a href="subject.html#2072">[ subject ]</a>
              <a href="author.html#2072">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm trying to build OpenOffice 2.0.4 w/ ooo-build 2.0.4 (cvs 20061017)
on Mandriva 2007.0 x86_64, but the build fails at testtools/bridgetest:

regcomp -register -r ../../unxlngx6.pro/misc/bridgetest/bootstrap.rdb -c
javaloader.uno.so \
        -c javavm.uno.so -c uriproc.uno.so
[Java framework] The JRE specified by the bootstrap variable
UNO_JAVA_JFW_JREHOME  or  UNO_JAVA_JFW_ENV_JREHOME  could not be
recognized. Check the values and make sure that you use a plug-in
library that can recognize that JRE.javaldx failed!
register component 'javaloader.uno.so' in registry
'../../unxlngx6.pro/misc/bridgetest/bootstrap.rdb' succesful!
register component 'javavm.uno.so' in registry
'../../unxlngx6.pro/misc/bridgetest/bootstrap.rdb' succesful!
register component 'uriproc.uno.so' in registry
'../../unxlngx6.pro/misc/bridgetest/bootstrap.rdb' succesful!
mkdir ../../unxlngx6.pro/lib/
mkdir: cannot create directory `../../unxlngx6.pro/lib/': File exists
cd ../../unxlngx6.pro/lib &amp;&amp;  regcomp -register -br uno_types.rdb -r
uno_services.rdb\
        -c acceptor.uno.so \
        -c bridgefac.uno.so \
        -c connector.uno.so \
        -c remotebridge.uno.so \
        -c uuresolver.uno.so \
        -c bridgetest.uno.so \
        -c cppobj.uno.so \
        -c uriproc.uno.so \
        -c constructors.uno.so
[Java framework] The JRE specified by the bootstrap variable
UNO_JAVA_JFW_JREHOME  or  UNO_JAVA_JFW_ENV_JREHOME  could not be
recognized. Check the values and make sure that you use a plug-in
library that can recognize that JRE.javaldx failed!
register component 'acceptor.uno.so' in registry 'uno_services.rdb'
succesful!
register component 'bridgefac.uno.so' in registry 'uno_services.rdb'
succesful!
register component 'connector.uno.so' in registry 'uno_services.rdb'
succesful!
register component 'remotebridge.uno.so' in registry 'uno_services.rdb'
succesful!
register component 'uuresolver.uno.so' in registry 'uno_services.rdb'
succesful!
register component 'bridgetest.uno.so' in registry 'uno_services.rdb'
succesful!
register component 'cppobj.uno.so' in registry 'uno_services.rdb' succesful!
register component 'uriproc.uno.so' in registry 'uno_services.rdb'
succesful!
register component 'constructors.uno.so' in registry 'uno_services.rdb'
succesful!
regcomp -register -br ../../unxlngx6.pro/lib/uno_types.rdb -r
../../unxlngx6.pro/lib/uno_services.rdb \
        -c javaloader.uno.so -c javavm.uno.so
[Java framework] The JRE specified by the bootstrap variable
UNO_JAVA_JFW_JREHOME  or  UNO_JAVA_JFW_ENV_JREHOME  could not be
recognized. Check the values and make sure that you use a plug-in
library that can recognize that JRE.javaldx failed!
register component 'javaloader.uno.so' in registry
'../../unxlngx6.pro/lib/uno_services.rdb' succesful!
register component 'javavm.uno.so' in registry
'../../unxlngx6.pro/lib/uno_services.rdb' succesful!
regcomp -register  -br ../../unxlngx6.pro/misc/bridgetest/bootstrap.rdb
-r ../../unxlngx6.pro/lib/uno_services.rdb -c \
      
<A HREF="file:///home/src/rpm/BUILD/ooo-build/build/OOO_2_0_4/testtools/source/bridgetest/../../unxlngx6.pro/class/testComponent.jar">file:///home/src/rpm/BUILD/ooo-build/build/OOO_2_0_4/testtools/source/bridgetest/../../unxlngx6.pro/class/testComponent.jar</A>
\
      
-env:URE_INTERNAL_JAVA_DIR=<A HREF="file:///home/src/rpm/BUILD/ooo-build/build/OOO_2_0_4/solver/680/unxlngx6.pro/bin">file:///home/src/rpm/BUILD/ooo-build/build/OOO_2_0_4/solver/680/unxlngx6.pro/bin</A>
[Java framework] The JRE specified by the bootstrap variable
UNO_JAVA_JFW_JREHOME  or  UNO_JAVA_JFW_ENV_JREHOME  could not be
recognized. Check the values and make sure that you use a plug-in
library that can recognize that JRE.javaldx failed!
[Java framework] The JRE specified by the bootstrap variable
UNO_JAVA_JFW_JREHOME  or  UNO_JAVA_JFW_ENV_JREHOME  could not be
recognized. Check the values and make sure that you use a plug-in
library that can recognize that JRE.register component
'<A HREF="file:///home/src/rpm/BUILD/ooo-build/build/OOO_2_0_4/testtools/source/bridgetest/../../unxlngx6.pro/class/testComponent.jar'">file:///home/src/rpm/BUILD/ooo-build/build/OOO_2_0_4/testtools/source/bridgetest/../../unxlngx6.pro/class/testComponent.jar'</A>
in registry '../../unxlngx6.pro/lib/uno_services.rdb' failed!
error (RuntimeException): [JavaVirtualMachine]:An unexpected error
occurred while starting Java!
using loader com.sun.star.loader.Java2
dmake:  Error code 1, while making '../../unxlngx6.pro/lib/uno_services.rdb'
dmake:  '../../unxlngx6.pro/lib/uno_services.rdb' removed.
'---* tg_merge.mk *---'

I'm using GNU java (--with-java=gij), and this is the only java env.
installed on my system.
The error seems to be very similar to what is reported in this thread:
<A HREF="../2006-June/001867.html">http://lists.ximian.com/pipermail/openoffice/2006-June/001867.html</A>

I have tried the disable-regcomp-java.diff patch posted in this thread
=&gt; no difference
I've also tried exporting
UNO_JAVA_JFW_ENV_JREHOME=<A HREF="file:///usr/lib/jvm/java-gcj">file:///usr/lib/jvm/java-gcj</A> =&gt; no difference
and I've tried setting
'-env:UNO_JAVA_JFW_ENV_JREHOME=<A HREF="file:///usr/lib/jvm/java-gcj'">file:///usr/lib/jvm/java-gcj'</A> on the
regcomp cmd line (in bridgetest makefile) =&gt; no difference.

The gcc/glibc versions are: 4.1.1/2.4 (and java-1.4.2-gcj-compat 1.4.2.0
is installed).

Does anyone have any clues on what is going on here ? Is there a patch I
have missed ?

Atle Nissestad

</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002071.html">[Open Office] jni.h could not be found
</A></li>
	<LI>Next message: <A HREF="002073.html">[Open Office] JRE register fails when building 2.0.4 on	Mandriva 2007 x86_64
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2072">[ date ]</a>
              <a href="thread.html#2072">[ thread ]</a>
              <a href="subject.html#2072">[ subject ]</a>
              <a href="author.html#2072">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.ximian.com/mailman/listinfo/openoffice">More information about the Openoffice
mailing list</a><br>
</body></html>
